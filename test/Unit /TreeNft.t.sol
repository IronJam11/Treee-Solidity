// SPDX-License-Identifier: SEE LICENSE IN LICENSE
pragma solidity ^0.8.18;

import {Test, console} from "forge-std/Test.sol";
import {TreeNft} from "../../src/TreeeNft.sol";

contract TreeNftTest is Test {
    TreeNft treeNft;
    address USER = makeAddr("user");
    string public constant TREE_IMAGE_URI =
        "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBHcm91bmQgLS0+CiAgPHJlY3QgeD0iMCIgeT0iMjcwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjOEI0NTEzIi8+CgogIDwhLS0gVHJ1bmsgLS0+CiAgPHJlY3QgeD0iOTUiIHk9IjE1MCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEyMCIgZmlsbD0iIzZCNDIyNiIvPgoKICA8IS0tIExlZnQgTGVhZiAtLT4KICA8cGF0aCBkPSJNMTAwIDE1MCBDODAgMTMwLCA2MCAxMTAsIDcwIDkwIEM4MCA3MCwgMTAwIDgwLCAxMDAgMTAwIiBmaWxsPSIjMjI4QjIyIi8+CgogIDwhLS0gUmlnaHQgTGVhZiAtLT4KICA8cGF0aCBkPSJNMTAwIDE1MCBDMTIwIDEzMCwgMTQwIDExMCwgMTMwIDkwIEMxMjAgNzAsIDEwMCA4MCwgMTAwIDEwMCIgZmlsbD0iIzIyOEIyMiIvPgoKICA8IS0tIFN1bmxpZ2h0IEdsb3cgLS0+CiAgPGNpcmNsZSBjeD0iMTAwIiBjeT0iNTAiIHI9IjMwIiBmaWxsPSJ5ZWxsb3ciIG9wYWNpdHk9IjAuMyIvPgo8L3N2Zz4=";
    string public constant TREE_TOKEN_URI =
        "data:application/json;base64,eyJuYW1lIjoiVHJlZU5GVCAjMCIsICJkZXNjcmlwdGlvbiI6IkEgVHJlZSBORlQgZm9yIHBsYW50aW5nIGEgdHJlZSIsICJhdHRyaWJ1dGVzIjogW3sidHJhaXRfdHlwZSI6ICJMYXRpdHVkZSIsICJ2YWx1ZSI6ICIxMDAifSwgeyJ0cmFpdF90eXBlIjogIkxvbmdpdHVkZSIsICJ2YWx1ZSI6ICIxNTAifSwgeyJ0cmFpdF90eXBlIjogIlBsYW50aW5nIiwgInZhbHVlIjogIjEifSwgeyJ0cmFpdF90eXBlIjogIkRlYXRoIiwgInZhbHVlIjogIjExNTc5MjA4OTIzNzMxNjE5NTQyMzU3MDk4NTAwODY4NzkwNzg1MzI2OTk4NDY2NTY0MDU2NDAzOTQ1NzU4NDAwNzkxMzEyOTYzOTkzNSJ9LCB7InRyYWl0X3R5cGUiOiAiVmVyaWZpZXJzIiwgInZhbHVlIjogIk5vbmUifV0sICJpbWFnZSI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1qQXdJaUJvWldsbmFIUTlJak13TUNJZ2RtbGxkMEp2ZUQwaU1DQXdJREl3TUNBek1EQWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStDaUFnUENFdExTQkhjbTkxYm1RZ0xTMCtDaUFnUEhKbFkzUWdlRDBpTUNJZ2VUMGlNamN3SWlCM2FXUjBhRDBpTWpBd0lpQm9aV2xuYUhROUlqTXdJaUJtYVd4c1BTSWpPRUkwTlRFeklpOCtDZ29nSUR3aExTMGdWSEoxYm1zZ0xTMCtDaUFnUEhKbFkzUWdlRDBpT1RVaUlIazlJakUxTUNJZ2QybGtkR2c5SWpFd0lpQm9aV2xuYUhROUlqRXlNQ0lnWm1sc2JEMGlJelpDTkRJeU5pSXZQZ29LSUNBOElTMHRJRXhsWm5RZ1RHVmhaaUF0TFQ0S0lDQThjR0YwYUNCa1BTSk5NVEF3SURFMU1DQkRPREFnTVRNd0xDQTJNQ0F4TVRBc0lEY3dJRGt3SUVNNE1DQTNNQ3dnTVRBd0lEZ3dMQ0F4TURBZ01UQXdJaUJtYVd4c1BTSWpNakk0UWpJeUlpOCtDZ29nSUR3aExTMGdVbWxuYUhRZ1RHVmhaaUF0TFQ0S0lDQThjR0YwYUNCa1BTSk5NVEF3SURFMU1DQkRNVEl3SURFek1Dd2dNVFF3SURFeE1Dd2dNVE13SURrd0lFTXhNakFnTnpBc0lERXdNQ0E0TUN3Z01UQXdJREV3TUNJZ1ptbHNiRDBpSXpJeU9FSXlNaUl2UGdvS0lDQThJUzB0SUZOMWJteHBaMmgwSUVkc2IzY2dMUzArQ2lBZ1BHTnBjbU5zWlNCamVEMGlNVEF3SWlCamVUMGlOVEFpSUhJOUlqTXdJaUJtYVd4c1BTSjVaV3hzYjNjaUlHOXdZV05wZEhrOUlqQXVNeUl2UGdvOEwzTjJaejQ9In0=";

    function setUp() public {
        treeNft = new TreeNft();
    }

    function testViewTokenURI() public {
        vm.prank(USER);
        uint256 latitude = 100;
        uint256 longitude = 150;
        string memory species = "Pine";
        treeNft.mintNft(latitude, longitude, species, TREE_IMAGE_URI);
        console.log(treeNft.tokenURI(0));
        assertEq(keccak256(abi.encodePacked(treeNft.tokenURI(0))), keccak256(abi.encodePacked(TREE_TOKEN_URI)));
    }
}
